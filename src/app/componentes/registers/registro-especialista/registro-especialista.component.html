<div class="fondo">
    <a class="button" [routerLink]="['/bienvenida']">
        <div class="button-box">
          <span class="button-elem">
            <svg viewBox="0 0 46 40" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"
              ></path>
            </svg>
          </span>
          <span class="button-elem">
            <svg viewBox="0 0 46 40">
              <path
                d="M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"
              ></path>
            </svg>
          </span>
        </div>
    </a>
    <div class="container px-4 py-5" id="featured-3">
        <h1 class="pb-2 border-bottom">Registro Especialista</h1>
        <div class="row g-5 py-3 row-cols-1 d-flex justify-content-between">
            <div class="col-7">
                <form [formGroup]="formulario" (ngSubmit)="crearEspecialista()" class="formulario container-fluid">
                    
                    <div class="row mb-3">
                        <div class="col form-floating form-control-group p-2 mb-3 mr-3">
                            <input type="text" class="form-control" id="nombre" formControlName="nombre">
                            <label class="form-label" for="nombre">Nombre</label>
                            <span *ngIf="isValidField('nombre')" class="form-text text-danger">
                                {{getFieldError('nombre')}}
                            </span>
                        </div>
                        <div class="col form-floating form-control-group p-2 mb-3">
                            <input type="text" class="form-control" id="apellido" formControlName="apellido">
                            <label class="form-label" for="apellido">Apellido</label>
                            <span *ngIf="isValidField('apellido')" class="form-text text-danger">
                                {{getFieldError('apellido')}}
                            </span>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col form-floating form-control-group p-2 mb-3 mr-3">
                            <input type="text" class="form-control" id="edad" formControlName="edad">
                            <label class="form-label" for="edad">Edad</label>
                            <span *ngIf="isValidField('edad')" class="form-text text-danger">
                                {{getFieldError('edad')}}
                            </span>
                        </div>
                        <div class="col form-floating form-control-group p-2 mb-3">
                            <input type="text" class="form-control" id="dni" formControlName="dni">
                            <label class="form-label" for="dni">DNI</label>
                            <span *ngIf="isValidField('dni')" class="form-text text-danger">
                                {{getFieldError('dni')}}
                            </span>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col form-floating form-control-group p-2 mb-3 mr-3">
                            <input type="email" class="form-control" id="mail" formControlName="mail">
                            <label class="form-label" for="mail">Mail</label>
                            <span *ngIf="isValidField('mail')" class="form-text text-danger">
                                {{getFieldError('mail')}}
                            </span>
                        </div>
                        <div class="col form-floating form-control-group p-2 mb-3">
                            <input type="password" class="form-control" id="password" formControlName="password"> <!-- Changed type to password -->
                            <label class="form-label" for="password">Contrase√±a</label>
                            <span *ngIf="isValidField('password')" class="form-text text-danger">
                                {{getFieldError('password')}} <!-- Fixed typo -->
                            </span>
                        </div>
                    </div>

                    <div class="form-floating form-control-group p-2 mb-5">
                        <input type="file" class="form-control" id="fotoPerfil" formControlName="fotoPerfil" (change)="uploadImage($event)">
                        <label class="form-label" for="fotoPerfil">Foto de perfil</label>
                        <span *ngIf="isValidField('fotoPerfil')" class="form-text text-danger">
                            {{getFieldError('fotoPerfil')}}
                        </span>
                    </div>
                    
                    <div class="d-grid gap-2 col-8 mx-auto mb-3">
                        <button type="submit" class="btn btn-primary" [disabled]="showCaptchaError">Registrarse</button>
                    </div>
                    <div class="spinner-border text-primary" role="status" *ngIf="loading != false">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                    <re-captcha (resolved)="resolved($event)" siteKey="6Le48wMqAAAAAC_31gEUMff59BrnUN89d5xx9zPS"></re-captcha>
                    <p *ngIf="msjExito != undefined" class="alert alert-success mb-auto">{{msjExito}}</p>
                    <p *ngIf="msjError != '' && msjExito == undefined" class="alert alert-danger mb-auto">{{msjError}}</p>
                </form>
            </div>

            <div class="col-4">
                <div class="w-100">
                    <app-tabla-especialidades (especialidadSeleccionado)="getEspecialidad($event)"></app-tabla-especialidades>
                    <span *ngIf="isValidField('especialidades')" class="form-text text-danger">
                        Debe tener por lo menos una especialidad.
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
